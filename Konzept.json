{
  "project": "Telegram → Bitget Trading Bot",
  "author": "SimonH93",
  "version": "1.0",
  "description": "Trading-Bot, der Telegram-Signale aufnimmt und Trades über die Bitget-API ausführt. Ziel: maximal 5 Sekunden Latenz von Signal zu Order.",
  "architecture": {
    "webhook": {
      "technology": "FastAPI + Uvicorn",
      "purpose": "Empfängt Telegram-Nachrichten über HTTPS Webhook",
      "notes": "Bestätigt Telegram sofort mit 200, minimaler Verarbeitung im Request"
    },
    "validation_parser": {
      "purpose": "Schnelle syntaktische und semantische Prüfung der Nachricht",
      "checks": ["Whitelist Sender/Channel", "Signal-Template prüfen", "Symbol/Size/Price validieren"]
    },
    "queue_worker": {
      "technology": "Redis + Huey/RQ/Celery",
      "purpose": "Enqueued valid signals für asynchrone Ausführung",
      "notes": "Worker nimmt Signal, baut Bitget-Order, sendet Order via API, protokolliert Ergebnisse"
    },
    "bitget_execution": {
      "technology": "Bitget REST API v2",
      "features": ["clientOid für Idempotency", "async HTTP requests via httpx", "Symbol metadata caching"],
      "error_handling": ["Min/Max size check", "Price step validation", "Rate limit handling", "Retries mit exponential backoff"]
    },
    "persistence": {
      "db": ["PostgreSQL oder SQLite"],
      "transient": ["Redis queue", "symbol cache"],
      "logging": ["Orders, errors, execution status"]
    },
    "monitoring": {
      "metrics": ["latency Telegram→Order", "error rate", "order fill status"],
      "optional": ["WebSocket monitoring für Order-Fills"]
    },
    "admin_ui": {
      "purpose": "Optionale Kontrolle: Pause, letzte Signale anzeigen, pending jobs verwalten"
    }
  },
  "tech_stack": [
    "Python 3.11+",
    "FastAPI",
    "httpx / aiohttp (async HTTP client)",
    "Redis",
    "Huey / RQ / Celery",
    "PostgreSQL / SQLite",
    "Railway deployment"
  ],
  "signal_format": {
    "preferred": "JSON",
    "example": {
      "symbol": "BTCUSDT",
      "side": "buy",
      "type": "market",
      "size": "0.001",
      "leverage": 5,
      "clientOid": "uuid4() optional"
    },
    "alternative": "Strict text template: SIGNAL | BTCUSDT | BUY | MARKET | 0.001 | LEV=5"
  },
  "execution_strategy": {
    "goal": "≤5 Sekunden von Telegram-Signal zu Bitget-Order",
    "methods": [
      "Webhook push statt Polling",
      "Async HTTP requests",
      "Persistent HTTP connections",
      "Local symbol metadata caching",
      "Minimal processing in webhook",
      "Idempotent orders mit clientOid"
    ]
  },
  "deployment": {
    "platform": "Railway",
    "services": ["Web process: FastAPI webhook", "Worker process: Huey/RQ"],
    "add-ons": ["Redis", "PostgreSQL optional"],
    "notes": "Railway liefert HTTPS für webhook, Environment variables für secrets"
  },
  "security": [
    "API keys in Railway environment variables",
    "HTTPS webhook",
    "Telegram secret token verification optional",
    "SSH or token-based GitHub authentication"
  ],
  "next_steps_mvp": [
    "FastAPI webhook lokal entwickeln, ngrok test webhook",
    "Local worker + Redis, test Bitget testnet orders",
    "Idempotency + symbol cache + revalidation implementieren",
    "Deployment auf Railway: web + worker + Redis",
    "Logging, alerts, rate limit handling",
    "Optional: WebSocket monitoring + admin UI"
  ],
  "risks": [
    "Market risk (slippage, partial fills)",
    "Security: API keys grant trading control",
    "Exchange rules: order rejection mapping"
  ]
}
